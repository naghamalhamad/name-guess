<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="name.css">


</head>
<body>
  <div class=" container">
    <h1> Name & Guess</h1>
<div class="card">
    <div class=" inputContainer">
    <label class="inputlabel">Enter Your name: </label><br>
    <input class="inputtext" name="inputtext" type="text" required  >
    <input class="btn" type="button" value="submit" onclick="validate()">

   </div> 

  <div class="genderimgcontainer">
    <p class="gendertxt">Gender: </p>
  </div>

  <p class="age">Age:</p>

  <div class="flags">
    <img class="flag1" src="" alt="flag1">
    <img class="flag2" src="" alt="flag2">
    <img class="flag3" src="" alt="flag3">
  </div>
</div>
  </div>

</body>
<script>
 
  
     //create input filed
     const btn=document.querySelector('.inputbtn');
     const inputContainer=document.querySelector('.inputContainer');
     inputContainer.addEventListener('click',function(e){
     e.preventDefault();
     const inputtext=document.querySelector('.inputtext');
    
      //console.log(inputvalue);
     });

    //check input one-word entering
    const inputtext = document.querySelector('.inputtext');
    const container = document.querySelector('.container');
    const card= document.querySelector('.card');
    const showgender= document.querySelector('.gendertext');
    function validate(){

    const validinput=inputtext.value.split(' ');
    if(validinput.length===1){
  //if the input is valid 
  //get the data using fetch and promise.all
    const inputvalue= inputtext.value;
    Promise.all([fetch('https://api.genderize.io?name='+inputvalue)
    .then((response)=> response.json()),
    fetch( 'https://api.nationalize.io?name='+inputvalue)
    .then((response)=> response.json()),
    fetch('https://api.agify.io?name='+inputvalue)
    .then((response)=> response.json()),
])
  .then((json)=> {
    const gender = json[0].gender;
    const country = json[1].country[0].country_id; 
    const age = json[2].age;

    
    //check the gender and show the result
    const gendertxt= document.querySelector('.gendertxt');
    if (gender==='male'){
      const showmale= document.createElement('img');
      showmale.classList.add('male');
      showmale.src='male.svg';
      gendertxt.appendChild(showmale);
      }
    else{
      const showfemale= document.createElement('img');
      showfemale.classList.add('female');
      showfemale.src='female.svg';
      gendertxt.appendChild(showfemale);
    }

    
    //show age in html doc
    const showage=document.querySelector('.age');
    showage.innerText= 'Age:'+age;
    card.appendChild(showage);

    //to check
    console.log(gender);
    console.log(age);
    console.log(country);

    })
     // get the countries id
   .then(fetch('https://restcountries.com/v3.1/alpha?codes=us'))
   .then((response)=> response.json())
   .then((json)=> {
    // show the flag of the countries
    console.log(json);
    })
    
    .catch((err) => {
      console.log(err);
      });
    }
    
    else{
    alert('Sorry I can\'t take your input.');
    }
    };



</script>

</html>

